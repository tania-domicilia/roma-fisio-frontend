{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FA INNOVATIONS TECH\\\\Downloads\\\\Nuovo progetto fisio\\\\roma-fisio-frontend (13)\\\\src\\\\pages\\\\DashboardPage.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { format, isWithinInterval, parseISO, addDays } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:8000\";\nexport default function DashboardPage() {\n  _s();\n  const [pazienti, setPazienti] = useState([]);\n  const [fisioterapisti, setFisioterapisti] = useState([]);\n  const [piani, setPiani] = useState([]);\n  useEffect(() => {\n    fetch(`${API_URL}/pazienti`).then(r => r.json()).then(setPazienti);\n    fetch(`${API_URL}/fisioterapisti`).then(r => r.json()).then(setFisioterapisti);\n    fetch(`${API_URL}/piani`).then(r => r.json()).then(setPiani);\n  }, []);\n  const oggi = new Date();\n  const pianiAttivi = piani.filter(p => parseISO(p.data_inizio) <= oggi && parseISO(p.data_fine) >= oggi);\n  const pianiInScadenza = piani.filter(p => isWithinInterval(oggi, {\n    start: parseISO(p.data_fine),\n    end: addDays(parseISO(p.data_fine), 7)\n  }));\n  const conteggioFisio = fisioterapisti.map(f => {\n    const tot = piani.filter(p => p.fisioterapista_id === f.id).length;\n    return {\n      ...f,\n      totale: tot\n    };\n  }).sort((a, b) => b.totale - a.totale);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-xl font-bold mb-4\",\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow p-4 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold\",\n          children: \"Pazienti totali\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-3xl\",\n          children: pazienti.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow p-4 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold\",\n          children: \"Piani attivi oggi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-3xl\",\n          children: pianiAttivi.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow p-4 rounded col-span-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold\",\n          children: \"Fisioterapisti per numero di piani\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"mt-2 space-y-1\",\n          children: conteggioFisio.map(f => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [f.nominativo, \" \\u2013 \", f.totale, \" piano\", f.totale !== 1 ? \"i\" : \"\"]\n          }, f.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-yellow-100 border border-yellow-400 p-4 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"font-semibold mb-2\",\n        children: \"Piani in scadenza (entro 7 giorni)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc ml-4 space-y-1\",\n        children: pianiInScadenza.map(p => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [format(parseISO(p.data_fine), \"dd/MM/yyyy\"), \" \\u2013 Paziente: \", p.paziente_id]\n        }, p.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), pianiInScadenza.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Nessun piano in scadenza.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 42\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n_s(DashboardPage, \"UHB5Z95wGJylOreMUPLySE1QJjQ=\");\n_c = DashboardPage;\nvar _c;\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"names":["useEffect","useState","format","isWithinInterval","parseISO","addDays","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","DashboardPage","_s","pazienti","setPazienti","fisioterapisti","setFisioterapisti","piani","setPiani","fetch","then","r","json","oggi","Date","pianiAttivi","filter","p","data_inizio","data_fine","pianiInScadenza","start","end","conteggioFisio","map","f","tot","fisioterapista_id","id","length","totale","sort","a","b","className","children","fileName","_jsxFileName","lineNumber","columnNumber","nominativo","paziente_id","_c","$RefreshReg$"],"sources":["C:/Users/FA INNOVATIONS TECH/Downloads/Nuovo progetto fisio/roma-fisio-frontend (13)/src/pages/DashboardPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { format, isWithinInterval, parseISO, addDays } from \"date-fns\";\n\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:8000\";\n\nexport default function DashboardPage() {\n  const [pazienti, setPazienti] = useState([]);\n  const [fisioterapisti, setFisioterapisti] = useState([]);\n  const [piani, setPiani] = useState([]);\n\n  useEffect(() => {\n    fetch(`${API_URL}/pazienti`).then(r => r.json()).then(setPazienti);\n    fetch(`${API_URL}/fisioterapisti`).then(r => r.json()).then(setFisioterapisti);\n    fetch(`${API_URL}/piani`).then(r => r.json()).then(setPiani);\n  }, []);\n\n  const oggi = new Date();\n  const pianiAttivi = piani.filter(p =>\n    parseISO(p.data_inizio) <= oggi && parseISO(p.data_fine) >= oggi\n  );\n\n  const pianiInScadenza = piani.filter(p =>\n    isWithinInterval(oggi, {\n      start: parseISO(p.data_fine),\n      end: addDays(parseISO(p.data_fine), 7),\n    })\n  );\n\n  const conteggioFisio = fisioterapisti.map(f => {\n    const tot = piani.filter(p => p.fisioterapista_id === f.id).length;\n    return { ...f, totale: tot };\n  }).sort((a, b) => b.totale - a.totale);\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-bold mb-4\">Dashboard</h1>\n\n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\n        <div className=\"bg-white shadow p-4 rounded\">\n          <h2 className=\"font-semibold\">Pazienti totali</h2>\n          <p className=\"text-3xl\">{pazienti.length}</p>\n        </div>\n        <div className=\"bg-white shadow p-4 rounded\">\n          <h2 className=\"font-semibold\">Piani attivi oggi</h2>\n          <p className=\"text-3xl\">{pianiAttivi.length}</p>\n        </div>\n        <div className=\"bg-white shadow p-4 rounded col-span-2\">\n          <h2 className=\"font-semibold\">Fisioterapisti per numero di piani</h2>\n          <ul className=\"mt-2 space-y-1\">\n            {conteggioFisio.map(f => (\n              <li key={f.id}>\n                {f.nominativo} – {f.totale} piano{f.totale !== 1 ? \"i\" : \"\"}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n\n      <div className=\"bg-yellow-100 border border-yellow-400 p-4 rounded\">\n        <h2 className=\"font-semibold mb-2\">Piani in scadenza (entro 7 giorni)</h2>\n        <ul className=\"list-disc ml-4 space-y-1\">\n          {pianiInScadenza.map(p => (\n            <li key={p.id}>\n              {format(parseISO(p.data_fine), \"dd/MM/yyyy\")} – Paziente: {p.paziente_id}\n            </li>\n          ))}\n        </ul>\n        {pianiInScadenza.length === 0 && <p>Nessun piano in scadenza.</p>}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}